<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <title>Shop</title>
  <link rel="stylesheet" href="assets/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-frame">
    <header>
      <div class="brand">LuxeStore</div>
      <a href="cart.html" style="text-decoration:none;">ğŸ›ï¸ <span id="cartCount">0</span></a>
    </header>

    <div class="content">
      <h3 style="margin-top:0">New Arrivals</h3>
      <div class="grid" id="productGrid">
        </div>
    </div>

    <div class="nav-bar">
      <a href="index.html" class="nav-link active"><span class="nav-icon">ğŸ </span>Home</a>
      <a href="cart.html" class="nav-link"><span class="nav-icon">ğŸ›’</span>Cart</a>
      <a href="admin.html" class="nav-link"><span class="nav-icon">âš™ï¸</span>Admin</a>
    </div>
  </div>

  <script>
    // Default data if storage is empty
    const defaults = [
      { id: 1, name: "Summer Dress", price: 49, img: "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=400" },
      { id: 2, name: "Denim Jacket", price: 85, img: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=400" },
      { id: 3, name: "Casual Sneakers", price: 120, img: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400" },
      { id: 4, name: "Elegant Hat", price: 35, img: "https://images.unsplash.com/photo-1521369909029-2afed882baee?w=400" }
    ];

    // Load Products
    let products = JSON.parse(localStorage.getItem('products'));
    if (!products || products.length === 0) {
      products = defaults;
      localStorage.setItem('products', JSON.stringify(defaults));
    }

    const grid = document.getElementById('productGrid');
    
    grid.innerHTML = products.map(p => `
      <div class="card">
        <img src="${p.img}" class="card-img" alt="${p.name}">
        <div class="card-body">
          <div class="card-title">${p.name}</div>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <span class="card-price">$${p.price}</span>
            <button onclick="addToCart(${p.id})" style="background:var(--primary); color:#fff; border:none; border-radius:4px; padding:4px 10px;">+</button>
          </div>
        </div>
      </div>
    `).join('');

    // Cart Logic
    function addToCart(id) {
      const product = products.find(p => p.id === id);
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push(product);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateBadge();
    }

    function updateBadge() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      document.getElementById('cartCount').innerText = cart.length;
    }
    updateBadge();
  </script>
</body>
</html>